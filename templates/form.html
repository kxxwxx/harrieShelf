<!DOCTYPE html>
<html lang="ko">

    <head>
        <!-- Webpage Title -->
        <title>ì„œê°€ì— ì±… ê½‚ê¸° | HARRIE SHELF</title>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon" href="/static/images/favicon.png">

        <!-- Bulma CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"/>

        <!-- JS -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
                integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
                crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
                integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
                crossorigin="anonymous"></script>

        <!-- êµ¬ê¸€í°íŠ¸ -->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;500;700&display=swap"
              rel="stylesheet">

        <script type="text/javascript">

            function saveReview() {

                // 1. ì œëª©, ì €ì, ë¦¬ë·° ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
                let user = $('#user').val();
                let type = $('#type').val();
                let title = $('#title').val();
                let author = $('#author').val();
                let url = $('#url').val();
                let sentence = $('#sentence').val();
                let memo = $('#memo').val();

                // 2. ì œëª©, ì €ì, ë¦¬ë·° ì¤‘ í•˜ë‚˜ë¼ë„ ì…ë ¥í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° alertë¥¼ ë„ì›ë‹ˆë‹¤. -> ë‚˜ì¤‘ì—
                if (title == "") {
                    alert("ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
                    $("#title").focus();
                    return;
                } else if (author == "") {
                    alert("ì €ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
                    $("#author").focus();
                    return;
                } else if (memo == "") {
                    alert("ë©”ëª¨ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”");
                    $("#memo").focus();
                    return;
                }

                // 3. POST /review ì— ì €ì¥ì„ ìš”ì²­í•©ë‹ˆë‹¤.
                $.ajax({
                    type: "POST",
                    url: "/write",
                    data: {
                        user: user,
                        type: type,
                        title: title,
                        author: author,
                        url: url,
                        sentence: sentence,
                        memo: memo
                    },
                    success: function (response) {
                        if (response["result"] == "success") {
                            alert(response["msg"]);
                            location.href = "/myshelf";
                        }
                    }
                })
            }


            function selectTypeChanged() {
                let type = $('#type').val();
                if (type == 'ì†Œì„¤ì±…' || type == 'ì‹¤ìš©ì„œì ') {
                    $('#url-field').hide();
                } else {
                    $('#url-field').show();
                }
            }

            $(document).ready(function () {
                $('#url-field').hide();
            });

        </script>

        <style type="text/css">
            * {
                font-family: 'Noto Sans KR', sans-serif;
            }

            .form {
                width: 600px;
                margin: auto;
            }

            .intro {
                margin-top: 50px;
                margin-bottom: 20px;
            }


        </style>
    </head>

    <body>
        <div class="form">
            <!--            <img src="https://image.freepik.com/free-vector/large-bookcase-with-books-library-book-shelf-interior_92863-357.jpg"-->
            <!--                 class="img-fluid" alt="Responsive image">-->
            <div class="intro">
                <h1 class="title">ì–´ë–¤ ì±…ì„ ì½ìœ¼ì…¨ì–´ìš”?ğŸ“š </h1>
                <p>í•´ë¦¬ì–¸ì„ ìœ„í•´ ì½ì€ ì±…, ê¸°ì‚¬ì— ëŒ€í•œ ë‚´ìš©ì„ ë‚¨ê²¨ì£¼ì„¸ìš”.
                    <br> ê¸°ë¡í•œ ë‚´ìš©ì€ ê°œì¸ ì„œê°€ì— ê½‚íˆê²Œ ë©ë‹ˆë‹¤.</p>
            </div>

            <div>

                <div class="field">
                    <label class="label">ì‘ì„±ì</label>
                    <div class="control">
                        <div class="select is-success">
                            <select id="user">
                                <option>ê·œì›</option>
                                <option>ë¦¬ì•„</option>
                                <option>ì¬ì€</option>
                                <option>ë°°ì§€</option>
                                <option>ê¹€ì§€</option>
                                <option>ì´ì•ˆ</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="field">
                    <label class="label">êµ¬ë¶„</label>
                    <div class="control">
                        <div class="select is-success">
                            <select id="type" onchange="selectTypeChanged()">
                                <option>ì†Œì„¤ì±…</option>
                                <option>ì‹¤ìš©ì„œì </option>
                                <option>ê¸°ì‚¬</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="field">
                    <label class="label">ì œëª©</label>
                    <div class="control">
                        <input class="input is-success" type="text" id="title" placeholder="ì±… ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
                    </div>
                </div>

                <div class="field">
                    <label class="label">ì €ì</label>
                    <div class="control">
                        <input class="input is-success" type="text" id="author" placeholder="ì €ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
                    </div>
                </div>

                <div class="field" id="url-field">
                    <label class="label">URL</label>
                    <div class="control">
                        <input class="input is-success" type="text" id="url" placeholder="ê¸°ì‚¬ë¼ë©´ URLì„ ì‘ì„±í•´ì£¼ì„¸ìš”">
                    </div>
                </div>

                <div class="field">
                    <label class="label">ë§ˆìŒì— ë‹¿ì€ ë¬¸ì¥</label>
                    <div class="control">
                        <textarea class="textarea is-success" id="sentence"
                                  placeholder="ì–´ë–¤ ë‚´ìš©ì´ ë§ˆìŒì— ì™€ë‹¿ì•˜ë‚˜ìš”? ì˜¤ë˜ ê¸°ì–µí•˜ê³  ì‹¶ì€ ë¬¸ì¥ì„ ê¸°ë¡í•´ì£¼ì„¸ìš”."></textarea>
                    </div>
                </div>

                <div class="field">
                    <label class="label">í•¨ê»˜ ê¸°ì–µí•˜ê³  ì‹¶ì€ ë©”ëª¨</label>
                    <div class="control">
                        <textarea class="textarea is-success" id="memo"
                                  placeholder="í•´ë¦¬ì–¸ê³¼ ê³µìœ í•˜ê³  ì‹¶ì€ ì´ìœ ê°€ ìˆë‚˜ìš”? ë©”ëª¨ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”."></textarea>
                    </div>
                </div>

                <div class="control">
                    <button onclick="saveReview();" class="button is-success is-rounded is-focused">ë‚´ ì„œê°€ì— ì±…
                        ê½‚ê¸°
                    </button>
                </div>
            </div>
        </div>
        <br>
    </body>

</html>